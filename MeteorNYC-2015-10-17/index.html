<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <script src="remark.language.js"></script>
    <script>
      var hljs = remark.highlighter.engine;
    </script>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif';
        color: white;
      }
      a {
        color: rgba(81, 203, 238, 1);
      }
      .remark-slide-container {
        background-color: #3b5998;
      }
      .remark-slide-content {
        background-color: black;
      }
      #source {
        background: black;
      }
      img[alt=react] {
        width: 100px;
        margin-bottom: 2%;
      }
      img[alt=meteor] {
        width: 300px;
        margin-left: -10%;
      }
      img[alt=tom], img[alt=ryan] {
        width: 200px;
      }
      img[alt=game], img[alt=landing] {
        width: 600px;
      }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
        padding: 0;
        margin: 0;
      }
      pre {
        color: black;
        padding: 1em;
        border-radius: 3px;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle

# Reactive Native Mobile Apps with Meteor and React Native

![meteor](http://blog.cubettech.com/wp-content/uploads/2015/03/Meteorjs-Feature-Guide.png)
![react](http://blog.sendsonar.com/wp-content/uploads/2015/08/react1.png )

November 17, 2015 @ MeteorNYC Meetup

by Tom Goldenberg

#### Github: tgoldenberg

---

# What I hope to cover

--

1. How the destinies of React Native and Meteor have led to this moment

--

2. What React Native can bring to mobile development with Meteor

--

3. Looking Ahead


---

## Background Story - Teaching High School Students

![scriptEd](https://s3.amazonaws.com/ellevate-app-uploads-production/events/4019/event_image/large/scripted-full-mark-orange.png?1424753155)

`ScriptEd equips students in under-resourced schools with the fundamental coding skills and professional experiences that together create access to careers in technology.`

---

## Requirements from students:

--

1. Emojis

--

2. Chat

--

3. Photo/Video Uploading

<img src="https://raw.githubusercontent.com/tgoldenberg/Presentations/gh-pages/candy-chat-title.png"/>

---

## Final Product

### Testing

--
<img height="400" src="https://raw.githubusercontent.com/tgoldenberg/candy-chat-mtr/master/meteor-chat/candy-chat-3.png"/>

---
## Final Product
### User Validation

--
<img height="400" src="https://raw.githubusercontent.com/tgoldenberg/Presentations/gh-pages/candy-chat-4.png"/>

---

## React Native and Meteor - the Lead-up

--

1. Meteor 1.0 - October 28, 2014

__live-updating interfaces that let people see information and collaborate with each other in real time__

![meteor](http://blog.cubettech.com/wp-content/uploads/2015/03/Meteorjs-Feature-Guide.png)

---

2. React Native released for iOS - January, 2015

__It's worth noting that we're not chasing “write once, run anywhere.” Different platforms have different looks, feels, and capabilities, and as such, we should still be developing discrete apps for each platform, but the same set of engineers should be able to build applications for whatever platform they choose, without needing to learn a fundamentally different set of technologies for each. We call this approach “learn once, write anywhere.”__

![react](http://blog.sendsonar.com/wp-content/uploads/2015/08/react1.png )

---

3. First blog post about React Native and Meteor

[http://hharnisc.github.io/2015/04/15/react-native-and-meteor.html](http://hharnisc.github.io/2015/04/15/react-native-and-meteor.html

<img src="https://raw.githubusercontent.com/tgoldenberg/Presentations/gh-pages/rn-meteor-1.png" height="300"/>

---

4. Websocket Polyfill implemented for iOS in React Native

[https://github.com/hharnisc/react-native-meteor-websocket-polyfill](https://github.com/hharnisc/react-native-meteor-websocket-polyfill)

<pre><code>
  const DDPClient = require('ddp-client');

  let ddpClient = new DDPClient({url: http://localhost:3000});

  ddpClient.connect();

  ddpClient.subscribe('messages', []);

  ddpClient.on('message', function(message) {
    let msg = JSON.parse(message);
    switch(msg.collection) {
      case: /// determine which data type and update data store / state
    }
  });
</code></pre>

---

# Meteor and ReactJS

--

- get DDP out of the box (optimistic rendering, client-side DB)

--

- No need to manually configure event listeners (content automatically updates)

--

- Work on more abstracted level - no need to use jQuery to change the DOM

---
# React basics
```xml
  Counter = React.createClass({
    getInitialState: function() {
      return {count: 0}
    },
    handleClick: function() {
      this.setState({count: this.state.count+1});
    },
    render: function() {
      <div>
        <p>{this.state.count}</p>
        <button onClick={this.handleClick}>Hit me</button>
      </div>
    }
  });
```

## State - dynamic changeable data
## Props - passed on properties (usually doesn't change from user behavior)

---

# Why ReactJS with Meteor?

--

1. Diffing algorithm == fast re-rendering

--

2. Component-based architecture

--

3. Can build complex web of user interactions seamlessly

---

## What about real-time changes without the DB?

<pre><code>
  submitMessage: function(e) {
    e.preventDefault();
    var message = React.findDOMNode(this.refs.message).value;
    React.findDOMNode(this.refs.message).value = "";
    Streamy.rooms(this.props.gameId).emit('outgoing_chat', {
      from: this.props.username,
      message: message,
      submitted: new Date()
    });
  }

  // game.js

  Template.game.onRendered(function() {
    Streamy.onConnect(function() {
      Meteor.subscribe('rooms', Streamy.id());
    });
  });

</code></pre>

--

## Streamy & Streamy-rooms

[https://github.com/YuukanOO/streamy](https://github.com/YuukanOO/streamy)

---

## Challenges and Downsides to ReactJS

--

1. Global Namespace Pollution
  i.e. `Game = ReactMeteor.createClass({..`

--

2. Understanding difference between `getInitialState` and `getMeteorState`

--

3. Figuring out way to live update without DB persistence (general challenge)

--

4. Difficult to reference utility files unless you use global vars

--

## Benefits

--

1. Virtual DOM and intuitive re-rendering

--

2. State, behavior, and components all organized efficiently

--

3. Easier to manipulate non-DB-related dynamic changes

---
class: center, middle

# Future Plans

Github: [https://www.github.com/tgoldenberg/chess-server-mt](https://www.github.com/tgoldenberg/chess-server-mt)

Website: [http://chessmentor.meteor.com](http://chessmentor.meteor.com)

    </textarea>
    <script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">
    </script>
    <script>
    var slideshow = remark.create({
        highlightStyle: 'monokai',
        highlightLanguage: 'remark'
      }) ;
    </script>
  </body>
</html>
